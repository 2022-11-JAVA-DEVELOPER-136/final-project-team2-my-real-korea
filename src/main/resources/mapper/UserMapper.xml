<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.itwill.my_real_korea.mapper.UserMapper">

	<insert id="create" parameterType="com.itwill.my_real_korea.dto.user.User">
		insert into user_info(user_id, password, name, nickname, phone, email, birth, address, gender, point, is_admin) 
		values(#{userId},#{password},#{name},#{nickname},#{phone},#{email},#{birth},#{address},#{gender},#{point},#{isAdmin})
	</insert>
	<update id="update" parameterType="com.itwill.my_real_korea.dto.user.User">
		update  user_info 
		set password = #{password}, nickname = #{nickname}, phone = #{phone}, email = #{email}
		where user_id = #{userId}
	</update>
	<delete id="remove" parameterType="java.lang.String">
		delete user_info 
		where user_id = #{userId}
	</delete>
	<select id="findUser" parameterType="java.lang.String" resultType="com.itwill.my_real_korea.dto.user.User">
		select user_id, password, nickname, phone, email, birth, address, gender, point, is_admin 
		from user_info 
		where user_id = #{userId}
	</select>
	<select id="findUserList" resultType="com.itwill.my_real_korea.dto.user.User">
		select user_id, nickname, phone, email, birth, address, gender, point, is_admin
		from user_info
	</select>
	<select id="isExistUser" parameterType="java.lang.String" resultType="java.lang.Integer">
		select count(*) from user_info where user_id = #{userId}
	</select>
	<select id="isMatchPassword" parameterType="java.util.Map" resultType="java.lang.Integer">
		select count(*) from user_info where user_id = #{userId} and password = #{password}
	</select>
	
		<!-- 아이디 찾기 (이메일, 이름 )-->
	<select id="findIdByEmailName" parameterType="com.itwill.my_real_korea.dto.user.User" resultType="java.lang.String">
		select RPAD(substr(user_id, 1, 4), lengthb(user_id), '****') 
		from user_info 
		where email = #{email} and name = #{name}
	</select>
	
</mapper>