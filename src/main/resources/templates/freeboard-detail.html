<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">


    <meta name="viewport" content="width=device-width, initial-scale=1">

    <meta name="description"
          content="Citytours - Premium site template for city tours agencies, transfers and tickets.">
    <meta name="author" content="Ansonika">
    <title>CITY TOURS - City tours and travel site template by Ansonika</title>

    <!-- Favicons-->
    <link rel="shortcut icon" href="img/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon" type="image/x-icon" href="img/apple-touch-icon-57x57-precomposed.png">
    <link rel="apple-touch-icon" type="image/x-icon" sizes="72x72" href="img/apple-touch-icon-72x72-precomposed.png">
    <link rel="apple-touch-icon" type="image/x-icon" sizes="114x114"
          href="img/apple-touch-icon-114x114-precomposed.png">
    <link rel="apple-touch-icon" type="image/x-icon" sizes="144x144"
          href="img/apple-touch-icon-144x144-precomposed.png">

    <!-- GOOGLE WEB FONT -->
    <link href="https://fonts.googleapis.com/css?family=Gochi+Hand|Montserrat:300,400,700" rel="stylesheet">

    <!-- COMMON CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">
    <link href="css/vendors.css" rel="stylesheet">

    <!-- CSS -->
    <link href="css/blog.css" rel="stylesheet">

    <!-- CUSTOM CSS -->
    <link href="css/custom.css" rel="stylesheet">
    <script type="text/javascript">
       
        function fBoCommentCreate() {
            if (document.f.fCommentContent.value == "") {
                alert("내용을 입력하십시요.");
                document.f.fCommentContent.focus();
                return false;
            }
            document.f.action = "freeboard-comment-write-action";
            document.f.method = 'POST';
            document.f.submit();
        }

        function fBoModify() {
            document.f.action = "freeboard-modify-form";
            document.f.method = 'GET';
            document.f.submit();
        }

        function fBoDelete() {
            document.f.action = "freeboard-delete-action";
            document.f.method = 'POST';
            document.f.submit();
        }

        function fCoModify() {
            document.f.action = "freeboard-comment-modify-form";
            document.f.method = 'GET';
            document.f.submit();
        }

   
        function fCoDelete() {
            document.a.action = "freeboard-comment-delete-action";
            document.a.method = 'POST';
            document.a.submit();
        }
            

        //
        // $(document).on('click', '#fCoModifyForm', function (e) {
        //     // ajax로 리스트 부분만 검색된 리스트로 변경
        //     let url = 'fBoUpdate/{fBoNo}';
        //     let method = 'GET';
        //     let contentType = 'application/json;charset=UTF-8';
        //     let sendData = {
        //         fCoNo: $('#fCoNo').val(),
        //         fCommentContent: $('#fCommentContent').val(),
        //         fBoNo: $('#fBoNo').val(),
        //         userId: $('#userId').val()
        //     };
        //     console.log($('#userId').val());
        //     let async = true;
        //     // JSON.stringify() => 객체를 string 으로, JSON.parse() => string 을 객체로 만듬
        //     Request.ajaxRequest(url, method, contentType,
        //         JSON.stringify(sendData),
        //         function (resultJson) {
        //             //code 1 일때 render, 아닐 때 msg 띄움
        //             if (resultJson.code == 1) {
        //                 View.render("#freeBoardCommentModifyForm", resultJson, '#notice-write-detail');
        //             } else {
        //                 alert(resultJson.msg);
        //             }
        //             ;
        //         }, async);
        //     e.preventDefault();
        // });

    </script>
</head>

<body>


<div class="layer"></div>
<!-- Mobile menu overlay mask -->

<!--======================== Header========================== -->
<div id="header" th:include="include-common-top::include-common-top"></div>
<!--======================== End Header======================== -->


<section class="parallax-window" data-parallax="scroll" data-image-src="img/bg_blog.jpg" data-natural-width="1400"
         data-natural-height="470">
    <div class="parallax-content-1">
        <div class="animated fadeInDown">
            <h1>자유게시판 상세보기</h1>
        </div>
    </div>
</section>
<!-- End section -->

<main>
    <div id="position">
        <div class="container">
           <ul>
					<li><i class="icon-home" onclick="location.href='index'"></i><a href="index"></a>
					</li>
					<li><a href="freeboard-list">자유게시판</a>
					</li>
					<li>상세보기</li>
				</ul>
        </div>
    </div>
    <!-- End position -->
    <div class="container margin_60">
        <div class="row">

            <div class="col-lg-9">
                <div class="box_style_1">
                    <div class="post nopadding">
                        <!--                        <img src="img/blog-1.jpg" alt="Image" class="img-fluid">-->
                        <div class="post_info clearfix">
                            <div class="post-left">
                                <ul>
                                    <li>
                                        <i class="icon-user"></i>작성자
                                        <span th:text="${freeBoard.userId}">12 Nov 2020</span>
                                        <i class="icon-calendar-empty"></i>작성일
                                        <span th:text="${#dates.format(freeBoard.getFBoDate(), 'yyyy.MM.dd')}">12 Nov 2020</span>
                                        <i class="icon-map"></i>도시
                                        <span th:text="${freeBoard.getCity().cityName}">12 Nov 2020</span>


                                    </li>
                                    <!--                                    <li><i class="icon-inbox-alt"></i>In <a href="#">Top tours</a>-->
                                    <!--                                    </li>-->
                                    <!--                                    <li><i class="icon-tags"></i>Tags <a href="#">Works</a> <a href="#">Personal</a>-->
                                    <!--                                    </li>-->
                                </ul>
                            </div>
                        </div>
                        <h2 th:text="${freeBoard.getFBoTitle()}"></h2>
                        <p th:text="${freeBoard.fBoContent}">
                        </p>


                        <blockquote class="styled">
                        </blockquote>
                        <div th:if="${loginUser != null && loginUser.userId == freeBoard.userId}">
                            <span style="float: right" type="button" onclick="fBoDelete();">삭제</span>
                            <span style="float: right" type="button" onclick="fBoModify();">수정</span>
                        </div>
                    </div>
                    <!-- end post -->
                </div>
                <!-- end box_style_1 -->
                <h4 style="display:inline" th:text="${selectCommentCount}"> comments </h4>
                <h4 style="display:inline">개의 답변</h4>

                <div id="comments">
                    <ol>
                        <li>
                            <form name="a" method="post">
                                <div class="review_strip_single" th:each="freeBoardComment:${freeBoardCommentList}">
                                    <div class="avatar">
                                        <a href="#"><img src="img/avatar1.jpg" alt="Image"></a>
                                    </div>

                                    <div>
                                        <small th:text="${#dates.format(freeBoardComment.fCommentDate, 'yyyy-MM-dd')}"></small>
                                        <h4 th:text="${freeBoardComment.userId}"></h4>
                                        <p th:text="${freeBoardComment.getFCommentContent()}"></p>

                                        <div th:if="${loginUser != null && loginUser.userId == freeBoardComment.userId}">
                                            <input type="hidden" name="fCoNo"
                                                   th:value="${freeBoardComment.getFCoNo()}"/>
                                            <input type="hidden" name="fBoNo"
                                                   th:value="*{freeBoard.getFBoNo()}"/>
                                            <p style="float: right" type="button" onclick="fCoDelete();">삭제</p>&nbsp;
                                            <p style="float: right" type="button" onclick="fCoModifyForm();">수정</p>
                                        </div>

                                    </div>


                                </div>
                                </form>
                    </ol>
                </div>

                <h4>댓글 달기</h4>
                <form name="f" method="post">
                    <input type="hidden" name="fCoNo" value="1"/>
                    <!--                    <input type="hidden" name="fCommentDate" th:value="${#dates.format(#calendars.createNow(), 'yyyy.MM.dd')}"/>-->
                    <input type="hidden" name="fBoNo" value="206" th:value="*{freeBoard.getFBoNo()}"/>
                    <div th:if="${loginUser != null }">
                        <input type="hidden" name="userId" value="user1" th:value="${loginUser.userId}"/>
                    </div>
                    <div class="form-group">
                        <textarea class="form-control style_2" style="height:150px;"
                                  placeholder="내용을 입력하세요" name="fCommentContent"></textarea>

                    </div>
                    <div class="form-group">
                        <!--                        <input type="button" class="btn_1" value="댓글 쓰기" onClick="fBoCommentCreate();"> &nbsp;-->
                        <button class="btn_1" type="button" onclick="fBoCommentCreate();">댓글 달기</button>
                        <!--                        <input type="submit" class="btn_1" value="댓글 달기" onClick="fBoCommentCreate();/>-->
                    </div>
                </form>

            </div>
            <!-- End col-md-8-->

            <aside class="col-lg-3 add_bottom_30">

                <div class="widget">
                    <div class="input-group">
                        <input type="text" class="form-control" placeholder="Search...">
                        <span class="input-group-btn">
						<button class="btn btn-default" type="button" style="margin-left:0;"><i class="icon-search"></i></button>
						</span>
                    </div>
                    <!-- /input-group -->
                </div>
                <!-- End Search -->
                <hr>
                <div class="widget" id="cat_blog">
                    <h4>Categories</h4>
                    <ul>
                        <li><a href="freeboard-list">전체보기</a>
                        </li>
                    </ul>
                </div>

                <hr>
                
                <!-- End widget -->

            </aside>
            <!-- End aside -->

        </div>
        <!-- End row-->
    </div>
    <!-- End container -->
</main>
<!-- End main -->
<!--========================= footer ========================-->
<footer class="revealed">
    <div id="footer" th:include="include-common-bottom::include-common-bottom"></div>
</footer>
<!-- End container -->
<!--========================= End footer ========================-->


<div id="toTop"></div><!-- Back to top button -->

<!-- Search Menu -->
<div class="search-overlay-menu">
    <span class="search-overlay-close"><i class="icon_set_1_icon-77"></i></span>
    <form role="search" id="searchform" method="get">
        <input value="" name="q" type="search" placeholder="Search..."/>
        <button type="submit"><i class="icon_set_1_icon-78"></i>
        </button>
    </form>
</div><!-- End Search Menu -->

<!-- Sign In Popup -->
<div id="sign-in-dialog" class="zoom-anim-dialog mfp-hide">
    <div class="small-dialog-header">
        <h3>Sign In</h3>
    </div>
    <form>
        <div class="sign-in-wrapper">
            <a href="#0" class="social_bt facebook">Login with Facebook</a>
            <a href="#0" class="social_bt google">Login with Google</a>
            <div class="divider"><span>Or</span></div>
            <div class="form-group">
                <label>Email</label>
                <input type="email" class="form-control" name="email" id="email">
                <i class="icon_mail_alt"></i>
            </div>
            <div class="form-group">
                <label>Password</label>
                <input type="password" class="form-control" name="password" id="password" value="">
                <i class="icon_lock_alt"></i>
            </div>
            <div class="clearfix add_bottom_15">
                <div class="checkboxes float-left">
                    <input id="remember-me" type="checkbox" name="check">
                    <label for="remember-me">Remember Me</label>
                </div>
                <div class="float-right"><a id="forgot" href="javascript:void(0);">Forgot Password?</a></div>
            </div>
            <div class="text-center"><input type="submit" value="Log In" class="btn_login"></div>
            <div class="text-center">
                Don’t have an account? <a href="javascript:void(0);">Sign up</a>
            </div>
            <div id="forgot_pw">
                <div class="form-group">
                    <label>Please confirm login email below</label>
                    <input type="email" class="form-control" name="email_forgot" id="email_forgot">
                    <i class="icon_mail_alt"></i>
                </div>
                <p>You will receive an email containing a link allowing you to reset your password to a new preferred
                    one.</p>
                <div class="text-center"><input type="submit" value="Reset Password" class="btn_1"></div>
            </div>
        </div>
    </form>
    <!--form -->
</div>
<!-- /Sign In Popup -->
<script id="freeBoardCommentModifyForm" type="text/x-handlebars-template">
    {{#each data}}
    <div class="col-lg-12">
        <div class="box_style_1">
            <div class="post nopadding">
                <!-- 이미지 일단 지움
                <img alt="Image" class="img-fluid"> -->
                <div class="post_info clearfix">
                    <div class="post-left">
                        <h2>{{ntitle}}</h2>
                        <ul>
                            <li><i class="icon-calendar-empty"></i>작성일 &nbsp;
                                <span>{{dateFormat ndate}}</span>
                            </li>
                        </ul>
                    </div>
                </div>
                <p>{{ncontent}}</p>
                <p>
                </p>
                {{#if nimg}}
                <img src="img/notice/{{nimg}}" alt="Image" class="img-fluid">
                {{/if}}
            </div>
            <!-- end post -->
            <a class="btn_1" href="notice-modify-form?nNo={{nno}}" role="button" id="notice-update-btn">수정</a> &nbsp;
            &nbsp; &nbsp;
            <a class="btn_1" href="" role="button" id="notice-delete-action-btn" data-nno="{{nno}}">삭제</a>
            <input type="hidden" id="nNo-hidden-value" value="{{nno}}">
        </div>
        <!-- end box_style_1 -->
        <!-- End Comments -->
    </div>
    {{/each}}
</script>

<!-- Common scripts -->
<script src="js/jquery-2.2.4.min.js"></script>
<script src="js/common_scripts_min.js"></script>
<script src="js/functions.js"></script>
<!--<script src="js/freeboard.js"></script>-->

</body>

</html>