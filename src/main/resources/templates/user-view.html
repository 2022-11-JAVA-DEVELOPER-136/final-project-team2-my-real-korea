<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<meta name="description" content="Citytours - Premium site template for city tours agencies, transfers and tickets.">
	<meta name="author" content="Ansonika">
	<title>CITY TOURS - City tours and travel site template by Ansonika</title>

	<!-- Favicons-->
	<link rel="shortcut icon" href="img/favicon.ico" type="image/x-icon">
	<link rel="apple-touch-icon" type="image/x-icon" href="img/apple-touch-icon-57x57-precomposed.png">
	<link rel="apple-touch-icon" type="image/x-icon" sizes="72x72" href="img/apple-touch-icon-72x72-precomposed.png">
	<link rel="apple-touch-icon" type="image/x-icon" sizes="114x114" href="img/apple-touch-icon-114x114-precomposed.png">
	<link rel="apple-touch-icon" type="image/x-icon" sizes="144x144" href="img/apple-touch-icon-144x144-precomposed.png">

    <!-- GOOGLE WEB FONT -->
    <link href="https://fonts.googleapis.com/css?family=Gochi+Hand|Montserrat:300,400,700" rel="stylesheet">
	
	<!-- COMMON CSS -->
	<link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">
	<link href="css/vendors.css" rel="stylesheet">
	
	<!-- SPECIFIC CSS -->
	<link href="css/admin.css" rel="stylesheet">
	
	<!-- CUSTOM CSS -->
	<link href="css/custom.css" rel="stylesheet">
<!-- ajax, handlebars 
<script  defer src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.js"></script>
<script  defer src="js/jquery.validate.js"></script>
<script  defer type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.1.2/handlebars.min.js"></script>
-->	

	
	<!-- Handlebars -->
	<script  defer type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.1.2/handlebars.min.js"></script>
	<!-- Daumpost -->
	<script src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
	
<script type="text/javascript">

	function userModify() {
		document.f.action = "user-modify-plain";
		document.f.submit();
	}
	
	function userRemove() {
		if (confirm("정말 탈퇴하시겠습니까?")) {
			document.f.action = "user-remove-action";
			document.f.submit();
		}
	}
		
	function userView() {
		if (confirm("정말 취소하시겠습니까?")) {
			location.href = "user-view";
		}
	}
	
	  const hypenTel = (target) => {
	 target.value = target.value
	   .replace(/[^0-9]/g, '')
	   .replace(/^(\d{2,3})(\d{3,4})(\d{4})$/, `$1-$2-$3`);
	}
	  
	 function kakaopost() {
		    new daum.Postcode({
		        oncomplete: function(data) {
		           document.querySelector("#address").value = data.address
		        }
		    }).open();
		}
	  
	 function modifyImg() {
			document.i.action = "user-img-modify-action";
			document.i.submit();
		} 
	  
</script>
</head>

<body>


	<div id="preloader">
		<div class="sk-spinner sk-spinner-wave">
			<div class="sk-rect1"></div>
			<div class="sk-rect2"></div>
			<div class="sk-rect3"></div>
			<div class="sk-rect4"></div>
			<div class="sk-rect5"></div>
		</div>
	</div>
	<!-- End Preload -->

	<div class="layer"></div>
	<!-- Mobile menu overlay mask -->

	<!--======================== Header========================== -->
	<div id="header" th:include="include-common-top::include-common-top"></div>
	<!--======================== End Header======================== -->

	<section class="parallax-window" data-parallax="scroll" data-image-src="img/admin_top.jpg" data-natural-width="1400" data-natural-height="470">
		<div class="parallax-content-1">
			<div class="animated fadeInDown">
				<h1><a th:text="${session.loginUser.nickname}" href=''></a> 님 안녕하세요!</h1>
			</div>
		</div>
	</section>
	<!-- End section -->

	<main>
		<div id="position">
			<div class="container">
				<ul>
					<li><a href="index">Home</a>
					</li>
					<li><a href="user-view">My Page</a>
					</li>
					<li>Page active</li>
				</ul>
			</div>
		</div>
		<!-- End Position -->

		<div class="margin_60 container">
			<div id="tabs" class="tabs">
				<nav>
					<ul>
						<li><a href="#section-1" class="icon-user-outline"><span>내 프로필</span></a>
						</li>
						<li><a href="#section-2" class="icon-star-2"><span>예약 내역</span></a>
						</li>
						<li><a href="#section-3" class="icon-edit"><span>내가 쓴 게시글</span></a>
						</li>
						<li><a href="#section-4" class="icon-chat-3"><span>내가 쓴 리뷰</span></a>
						</li>
					</ul>
				</nav>

				
				<div class="content">
<!-- section 1 start -->
<section id="section-1">
			
				<img th:src="@{upload-dir/{userImgUrl}(userImgUrl=${loginUser.userImg.userImgUrl})}" 
					 alt="Image" class="img-fluid styled profile_pic rounded-circle"  width = "200px" >
				<div style="text-align: center; font-weight: bold;">
					<h3><a th:text="${session.loginUser.userId}"></a></h3>
			
			
				<form method="POST" enctype="multipart/form-data" name="i">
				
				<div class="filebox">
				    <input class="upload-name" value="첨부파일" placeholder="첨부파일">
			
				    <label class="btn_1 green" for="file"> 파일 찾기</label> 
				    <input type="file" id="file"  name="file" >
					<button type="submit" class="btn_1 green" id="js-upload-submit" onclick="modifyImg();">수정 완료</button>
				    	</div>
			
				</form>
		</div>
	<br/><br/><br/>
						<form method="post" name="f" id="user-detail-form">
							<div class="row" >
							<div class="col-md-12"> </div>
								<input type="hidden"  id="userId" th:value = "${session.loginUser.userId}">
							<div class="col-md-3"> </div>
							<div class="col-md-9"> 
							<ul id="profile_summary" th:object="${loginUser}">
								<li>이름 <span th:text="*{name}"></span>
								</li>
								<li>닉네임 <span th:text="*{nickname}"></span>
								</li>
								<li>휴대폰 <span th:text="*{phone}"></span>
								</li>
								<li>이메일 <span th:text="*{email}"></span>
								</li>
								<li>생일 <span th:text="*{#dates.format(birth, 'yyyy년 MM월 dd일')}"></span>
								</li>
								<li>주소 <span th:text="*{address}"></span>
								</li>
								<li>성별 <span th:text="*{gender == 1} ? '남' : '여'"></span>
								</li>
								<li>포인트 <span th:text="*{point}+'p'"></span>
								</li>
							</ul>
							<ul id="profile_summary" th:object="${loginUser.userAddInfo}">
								<li>음주 여부 
								<span th:text="*{alcohol == 1} ? '음주 선호' : (*{alcohol == 2} ? '음주 선호하지 않음' : null)"></span>
								</li>
								<li>흡연 여부 
								<span th:text="*{smoking == 1} ? '흡연' : (*{smoking == 2} ? '비흡연' :  null)"></span>
								</li>
								<li>자기 소개 
								<span th:text="*{introduce}"></span>
								</li>
							</ul>
							</div>
							</div>
						
					<div style="text-align: center;">
					<input id="btn-user-modify-form" value="프로필 수정" class="btn_1 green" type="button"> 
					<button class="btn_1 green" type="button" onclick="userRemove();">회원 탈퇴</button>	
					</div>
			</form>
					
<!-- 페이지 로드 하는 폼  
<div class="row">

<div class="col-md-6">
	<form method="post" name="f" id="user-detail-form">
	<h3>회원 정보</h3>
		<ul id="profile_summary" th:object="${loginUser}">
			<li>아이디 <span th:text="*{userId}"></span>
			</li>
			<li>이름 <span th:text="*{name}"></span>
			</li>
			<li>닉네임 <span th:text="*{nickname}"></span>
			</li>
			<li>휴대폰 <span th:text="*{phone}"></span>
			</li>
			<li>이메일 <span th:text="*{email}"></span>
			</li>
			<li>생일 <span th:text="*{birth}"></span>
			</li>
			<li>주소 <span th:text="*{address}"></span>
			</li>
			<li>성별 <span th:text="*{gender == 1} ? '남' : '여'"></span>
			</li>
			<li>포인트 <span th:text="*{point}"></span>
			</li>
		</ul>
		
			

		<ul id="profile_summary" th:object="${loginUser.userAddInfo}">
			<li>자기 소개 
			<span th:text="*{introduce}"></span>
			</li>
			<li>음주 여부 
			<span th:text="*{alcohol == 1} ? '음주 선호' : (*{alcohol == 2} ? '음주 선호하지 않음' : null)"></span>
			</li>
			<li>흡연 여부 
			<span th:text="*{smoking == 1} ? '흡연' : (*{smoking == 2} ? '비흡연' :  null)"></span>
			</li>
		</ul>
		<ul id="profile_summary" th:object="${loginUser.userImg}">
			<li>프로필 이미지 <span th:text="*{userImgUrl}"></span></li>
		</ul>
	</form>
</div>

						<div class="col-md-6">
							<p>
							<img src="img/tourist_guide_pic.jpg" alt="Image" class="img-fluid styled profile_pic">
							</p>
						</div>
</div>
<button class="btn_1 green" type="button" onclick="userModify();">프로필 수정</button>
<button class="btn_1 green" type="button" onclick="userRemove();">회원 탈퇴</button>

	<input id="btn-user-modify-form" value="프로필 수정" class="btn_1 green" type="button"> 
	
	-->
	
		
						<!-- End row -->

</section>
<!-- End section 1 -->


<!--========================= include-user-view ========================-->
<section th:replace="include-user-view::section-2"></section>
<section th:replace="include-user-view::section-3"></section>
<section th:replace="include-user-view::section-4"></section>
<!--======================= End include-user-view ========================-->

					</div>
					<!-- End content -->
					
					
					
				</div>
				<!-- End tabs -->
			</div>
			<!-- end container -->
	</main>
	<!-- End main -->
	<!--========================= footer ========================-->
	<footer class="revealed">
		<div id="footer" th:include="include-common-bottom::include-common-bottom"></div>
	</footer>
		<!-- End container -->
	<!--========================= End footer ========================-->

	<div id="toTop"></div><!-- Back to top button -->
	
	<!-- Search Menu -->
	<div class="search-overlay-menu">
		<span class="search-overlay-close"><i class="icon_set_1_icon-77"></i></span>
		<form role="search" id="searchform" method="get">
			<input value="" name="q" type="search" placeholder="Search..." />
			<button type="submit"><i class="icon_set_1_icon-78"></i>
			</button>
		</form>
	</div><!-- End Search Menu -->
	
	<!-- Sign In Popup -->
	<div id="sign-in-dialog" class="zoom-anim-dialog mfp-hide">
		<div class="small-dialog-header">
			<h3>Sign In</h3>
		</div>
		<form>
			<div class="sign-in-wrapper">
				<a href="#0" class="social_bt facebook">Login with Facebook</a>
				<a href="#0" class="social_bt google">Login with Google</a>
				<div class="divider"><span>Or</span></div>
				<div class="form-group">
					<label>Email</label>
					<input type="email" class="form-control" name="email" id="email">
					<i class="icon_mail_alt"></i>
				</div>
				<div class="form-group">
					<label>Password</label>
					<input type="password" class="form-control" name="password" id="password" value="">
					<i class="icon_lock_alt"></i>
				</div>
				<div class="clearfix add_bottom_15">
					<div class="checkboxes float-left">
						<input id="remember-me" type="checkbox" name="check">
						<label for="remember-me">Remember Me</label>
					</div>
					<div class="float-right"><a id="forgot" href="javascript:void(0);">Forgot Password?</a></div>
				</div>
				<div class="text-center"><input type="submit" value="Log In" class="btn_login"></div>
				<div class="text-center">
					Don’t have an account? <a href="javascript:void(0);">Sign up</a>
				</div>
				<div id="forgot_pw">
					<div class="form-group">
						<label>Please confirm login email below</label>
						<input type="email" class="form-control" name="email_forgot" id="email_forgot">
						<i class="icon_mail_alt"></i>
					</div>
					<p>You will receive an email containing a link allowing you to reset your password to a new preferred one.</p>
					<div class="text-center"><input type="submit" value="Reset Password" class="btn_1"></div>
				</div>
			</div>
		</form>
		<!--form -->
	</div>
	<!-- /Sign In Popup -->
<!-- 
<script type="text/javascript">

Handlebars.registerHelper('ifEquals', function(arg1, arg2, options) {
    return (arg1 == arg2) ? options.fn(this) : options.inverse(this);
});
</script>	 -->	
<!-- 
 -->
<script id="user-modify-form-template" type="text/x-handlebars-template">
{{#each data}}

		
	
<form method="POST" name="f">
		<div class="col-md-12"> </div>

		<div class="col-md-3"> </div>
							<div class="col-md-9"> 
		<input type="hidden"  id="userId" value="{{userId}}" >
<!--
		<input type="hidden" id="password1" value="{{password}}">
-->
		<ul id="profile_summary_user">	   
			<li>이름 <span>{{name}}</span></li>
			<li>비밀번호 <span><input type="password" class=" form-control-user " name="password" id="password"></span></li>
			<li>비밀번호 확인<span><input type="password" class=" form-control-user " name="password2" id="password2"></span></li>
			<li>닉네임 
			<span><input id="nickname" class=" form-control-user " type="text" required="required" value="{{nickname}}"></span>
			</li>
			<li>휴대폰 <span>
			<input id="phone" class=" form-control-user " type="text" oninput="hypenTel(this)" maxlength="13" required="required" value="{{phone}}"></span>
			</li>
			<li>이메일 
			<span><input id="email" class=" form-control-user " type="text" required="required" value="{{email}}"></span>
			</li>
			<li>생일
			<span><input id="brith" class=" form-control-user " type="text" required="required" value="{{dateFormat birth}}"></span>
			</li>
			<li>주소 
			<span><input id="address" class=" form-control-user " type="text" required="required" value="{{address}}"> 
			&nbsp;&nbsp; <input type="button" class="btn_1 green" value=" 주소 찾기 " onclick="kakaopost()">
			</span>
			</li>
			{{#ifCond gender '==' 1}}
			<li>성별 <span>남성</span></li>
			{{/ifCond}}
			{{#ifCond gender '==' 2}}
			<li>성별 <span>여성</span></li>
			{{/ifCond}}

		    <li>포인트 <span>{{point}}p</span></li>
		</ul>
		</div>
		</div>
	<hr>
		<ul id="profile_summary_user">
	
	<h5> 선택정보 </h5>
		
			<li>음주 여부 
			<span> 
				<div class="btn-group btn-group-toggle" data-toggle="buttons">
					<label class="btn btn-secondary active">
						<input type="radio" name="aOptions" id="alcohol1" checked value="1"> O
					</label>

					<label class="btn btn-secondary">
						<input type="radio" name="aOptions" id="alcohol2" value="2"> X
					</label>
				</div>						
			</span>
			</li>

			<li>흡연 여부 
			<span> 
				<div class="btn-group btn-group-toggle" data-toggle="buttons">
					<label class="btn btn-secondary active">
						<input type="radio" name="sOptions" id="smoking1" checked value="1"> O
					</label>

					<label class="btn btn-secondary">
						<input type="radio" name="sOptions" id="smoking2" value="2"> X
					</label>
				</div>						
			</span>
			</li>	

			<li>자기 소개 
			<span><textarea id="introduce" class="form-control" rows="4" cols="50" required="required"> {{userAddInfo.introduce}} </textarea></span>
			</li>

		</ul>
		<br><br><br><br>
	<input id="btn-user-modify-action" value="수정 완료" class="btn_1 green" type="button"> 
	<input value="수정 취소" class="btn_1 green" type="button" onclick="userView();">
	</div>	
</div>
			
</form>
{{/each}}
</script> 


	<!-- Common scripts -->
	<script src="js/jquery-2.2.4.min.js"></script>
	<script src="js/common_scripts_min.js"></script>
	<script src="js/functions.js"></script>

	<!-- Specific scripts -->
	<script src="js/tabs.js"></script>
	<script src="js/app_user.js" type="module"></script>
	
	<script>
		new CBPFWTabs(document.getElementById('tabs'));
	</script>
	<script>
		$('.wishlist_close_admin').on('click', function (c) {
			$(this).parent().parent().parent().fadeOut('slow', function (c) {});
		});

	</script>
</body>

</html>